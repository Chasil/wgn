
Number.prototype.format=function(){var b=new String(this);b=b.split(/\,|\./);b[0]=b[0].split("");var e=b[0].length%3;var d="";var f=0;for(var c=0;c<b[0].length;f++){d+=(f==e||(f-e)%4==0?" ":b[0][c++])}if(b[1]&&b[1].length==1){b[1]+="0"}return d.replace(/(^\s*)|(\s*$)/g,"")+(b[1]?","+b[1]:",00")};var sp_w=2;var wpis=false;function setval(a){sp_w=a.value;calculate()}function calculate(){var c=2234.8;var e=parseFloat(document.forms.opcalc.cn.value);var b=parseFloat(0.02*e).toFixed(2);var g;var a=0;var j;var h;var i;var f;var d;if(e>0&&e<3000){a=100}if(e>=3000&&e<10000){a=100+0.03*(e-3000)}if(e>=10000&&e<30000){a=310+0.02*(e-10000)}if(e>=30000&&e<60000){a=710+0.01*(e-30000)}if(e>=60000&&e<1000000){a=1010+0.004*(e-60000)}if(e>=1000000&&e<2000000){a=4770+0.002*(e-1000000)}if(e>=2000000){a=6770+0.0025*(e-2000000)}a=a/sp_w;if(a>10000){a=10000}j=0;if(sp_w==2&&!wpis){j=0}else{j=200}g=parseFloat(0.23*a).toFixed(2);h=(parseFloat(document.forms.opcalc.prow.value)/100)*e;i=parseFloat(0.23*(h)).toFixed(2);f=parseFloat(parseFloat(b)+parseFloat(a)+parseFloat(j)+parseFloat(h)+parseFloat(g)+parseFloat(i));d=parseFloat(e+f);j=parseFloat(j).toFixed(2);a=parseFloat(a).toFixed(2);h=parseFloat(h).toFixed(2);i=parseFloat(i).toFixed(2);f=parseFloat(f).toFixed(2);d=parseFloat(d).toFixed(2);document.forms.opcalc.pod.value=parseFloat(b).format();document.forms.opcalc.ops.value=parseFloat(j).format();document.forms.opcalc.tn.value=parseFloat(a).format();document.forms.opcalc.vat.value=parseFloat(g).format();document.forms.opcalc.cprow.value=parseFloat(h).format();document.forms.opcalc.cprowv.value=parseFloat(i).format();document.forms.opcalc.opd.value=parseFloat(f).format();document.forms.opcalc.suma.value=parseFloat(d).format()}function check(){var a=parseInt(document.forms.opcalc.cn.value);if(isNaN(a)){document.forms.opcalc.cn.value=0}else{document.forms.opcalc.cn.value=a}calculate()}function check3(){document.forms.opcalc.prow.value=document.forms.opcalc.prow.value.replace(",",".");if(document.forms.opcalc.prow.value.substr(-1,1)=="."){return false}if(document.forms.opcalc.prow.value!="0"){var a=parseFloat(document.forms.opcalc.prow.value)}if(isNaN(a)){document.forms.opcalc.prow.value=0}else{document.forms.opcalc.prow.value=a}calculate()}function check2(){setTimeout(function(){check3()},5000)}function chops(){if(wpis){wpis=false}else{wpis=true}calculate()};